// Code generated by protoc-gen-go-leo. DO NOT EDIT.

package helloworld

import (
	context "context"
	cqrs "github.com/go-leo/leo/v3/cqrs"
)

func NewGreeterCqrsService[
	SayHelloQueryType SayHelloQuery, SayHelloResultType SayHelloResult,
](
	sayHelloHandler cqrs.QueryHandler[SayHelloQueryType, SayHelloResultType],
) (GreeterService, error) {
	var bus cqrs.SampleBus
	if err := bus.RegisterQuery(sayHelloHandler); err != nil {
		return nil, err
	}
	return &greeterCqrsService[
		SayHelloQueryType, SayHelloResultType,
	]{bus: &bus}, nil
}

type greeterCqrsService[
	SayHelloQueryType SayHelloQuery, SayHelloResultType SayHelloResult,
] struct {
	bus cqrs.Bus
}

func (svc *greeterCqrsService[
	SayHelloQueryType, SayHelloResultType,
]) SayHello(ctx context.Context, request *HelloRequest) (*HelloReply, error) {
	var query SayHelloQueryType
	q, ctx, err := query.From(ctx, request)
	if err != nil {
		return nil, err
	}
	r, err := svc.bus.Query(ctx, q)
	if err != nil {
		return nil, err
	}
	return r.(SayHelloResultType).To(ctx)
}

type (
	SayHelloQuery interface {
		isSayHelloQuery_Kind()
		From(context.Context, *HelloRequest) (SayHelloQuery, context.Context, error)
	}
	SayHelloResult interface {
		isSayHelloResult_Kind()
		To(context.Context) (*HelloReply, error)
	}
	UnimplementedSayHelloQuery  struct{}
	UnimplementedSayHelloResult struct{}
)

func (UnimplementedSayHelloQuery) isSayHelloQuery_Kind() {}
func (UnimplementedSayHelloQuery) From(context.Context, *HelloRequest) (SayHelloQuery, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedSayHelloResult) isSayHelloResult_Kind() {}
func (UnimplementedSayHelloResult) To(context.Context) (*HelloReply, error) {
	panic("implement me")
	return nil, nil
}

// f.File.Desc.Path(): helloworld/v1/helloworld.proto
// protoFilePath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld/v1/helloworld.proto<nil>
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld/v1/helloworld.proto
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld/v1/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld/v1
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/helloworld
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/cq
// -- cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example
// goMode.Module.Mod.Path: github.com/go-leo/leo/v3
// loopPath: /Users/stuff/Workspace/github/go-leo/leo
// loopPath: /Users/stuff/Workspace/github/go-leo
// loopPath: /Users/stuff/Workspace/github
// loopPath: /Users/stuff/Workspace
// loopPath: /Users/stuff
// loopPath: /Users
// loopPath: /
// rel: ../../../cq
// cmdFilename: ../../../cq/say_hello_leo.command.pb.go
