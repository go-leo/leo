// Code generated by protoc-gen-go-leo. DO NOT EDIT.

package user

import (
	context "context"
	cqrs "github.com/go-leo/leo/v3/cqrs"
	emptypb "google.golang.org/protobuf/types/known/emptypb"
)

func NewUserManagerCqrsService[
	CreateUserQueryType CreateUserQuery, CreateUserResultType CreateUserResult,
	DeleteUserCommandType DeleteUserCommand,
	UpdateUserCommandType UpdateUserCommand,
	GetUserQueryType GetUserQuery, GetUserResultType GetUserResult,
	GetUsersQueryType GetUsersQuery, GetUsersResultType GetUsersResult,
](
	createUserHandler cqrs.QueryHandler[CreateUserQueryType, CreateUserResultType],
	deleteUserHandler cqrs.CommandHandler[DeleteUserCommandType],
	updateUserHandler cqrs.CommandHandler[UpdateUserCommandType],
	getUserHandler cqrs.QueryHandler[GetUserQueryType, GetUserResultType],
	getUsersHandler cqrs.QueryHandler[GetUsersQueryType, GetUsersResultType],
) (UserManagerService, error) {
	var bus cqrs.SampleBus
	if err := bus.RegisterQuery(createUserHandler); err != nil {
		return nil, err
	}
	if err := bus.RegisterCommand(deleteUserHandler); err != nil {
		return nil, err
	}
	if err := bus.RegisterCommand(updateUserHandler); err != nil {
		return nil, err
	}
	if err := bus.RegisterQuery(getUserHandler); err != nil {
		return nil, err
	}
	if err := bus.RegisterQuery(getUsersHandler); err != nil {
		return nil, err
	}
	return &userManagerCqrsService[
		CreateUserQueryType, CreateUserResultType,
		DeleteUserCommandType,
		UpdateUserCommandType,
		GetUserQueryType, GetUserResultType,
		GetUsersQueryType, GetUsersResultType,
	]{bus: &bus}, nil
}

type userManagerCqrsService[
	CreateUserQueryType CreateUserQuery, CreateUserResultType CreateUserResult,
	DeleteUserCommandType DeleteUserCommand,
	UpdateUserCommandType UpdateUserCommand,
	GetUserQueryType GetUserQuery, GetUserResultType GetUserResult,
	GetUsersQueryType GetUsersQuery, GetUsersResultType GetUsersResult,
] struct {
	bus cqrs.Bus
}

func (svc *userManagerCqrsService[
	CreateUserQueryType, CreateUserResultType,
	DeleteUserCommandType,
	UpdateUserCommandType,
	GetUserQueryType, GetUserResultType,
	GetUsersQueryType, GetUsersResultType,
]) CreateUser(ctx context.Context, request *CreateUserRequest) (*CreateUserResponse, error) {
	var query CreateUserQueryType
	q, ctx, err := query.From(ctx, request)
	if err != nil {
		return nil, err
	}
	r, err := svc.bus.Query(ctx, q)
	if err != nil {
		return nil, err
	}
	return r.(CreateUserResultType).To(ctx)
}

func (svc *userManagerCqrsService[
	CreateUserQueryType, CreateUserResultType,
	DeleteUserCommandType,
	UpdateUserCommandType,
	GetUserQueryType, GetUserResultType,
	GetUsersQueryType, GetUsersResultType,
]) DeleteUser(ctx context.Context, request *DeleteUsersRequest) (*emptypb.Empty, error) {
	var command DeleteUserCommandType
	cmd, ctx, err := command.From(ctx, request)
	if err != nil {
		return nil, err
	}
	if err := svc.bus.Exec(ctx, cmd); err != nil {
		return nil, err
	}
	return new(emptypb.Empty), nil
}

func (svc *userManagerCqrsService[
	CreateUserQueryType, CreateUserResultType,
	DeleteUserCommandType,
	UpdateUserCommandType,
	GetUserQueryType, GetUserResultType,
	GetUsersQueryType, GetUsersResultType,
]) UpdateUser(ctx context.Context, request *UpdateUserRequest) (*emptypb.Empty, error) {
	var command UpdateUserCommandType
	cmd, ctx, err := command.From(ctx, request)
	if err != nil {
		return nil, err
	}
	if err := svc.bus.Exec(ctx, cmd); err != nil {
		return nil, err
	}
	return new(emptypb.Empty), nil
}

func (svc *userManagerCqrsService[
	CreateUserQueryType, CreateUserResultType,
	DeleteUserCommandType,
	UpdateUserCommandType,
	GetUserQueryType, GetUserResultType,
	GetUsersQueryType, GetUsersResultType,
]) GetUser(ctx context.Context, request *GetUserRequest) (*GetUserResponse, error) {
	var query GetUserQueryType
	q, ctx, err := query.From(ctx, request)
	if err != nil {
		return nil, err
	}
	r, err := svc.bus.Query(ctx, q)
	if err != nil {
		return nil, err
	}
	return r.(GetUserResultType).To(ctx)
}

func (svc *userManagerCqrsService[
	CreateUserQueryType, CreateUserResultType,
	DeleteUserCommandType,
	UpdateUserCommandType,
	GetUserQueryType, GetUserResultType,
	GetUsersQueryType, GetUsersResultType,
]) GetUsers(ctx context.Context, request *GetUsersRequest) (*GetUsersResponse, error) {
	var query GetUsersQueryType
	q, ctx, err := query.From(ctx, request)
	if err != nil {
		return nil, err
	}
	r, err := svc.bus.Query(ctx, q)
	if err != nil {
		return nil, err
	}
	return r.(GetUsersResultType).To(ctx)
}

type (
	DeleteUserCommand interface {
		isDeleteUserCommand_Kind()
		From(context.Context, *DeleteUsersRequest) (DeleteUserCommand, context.Context, error)
	}
	UnimplementedDeleteUserCommand struct{}

	UpdateUserCommand interface {
		isUpdateUserCommand_Kind()
		From(context.Context, *UpdateUserRequest) (UpdateUserCommand, context.Context, error)
	}
	UnimplementedUpdateUserCommand struct{}
)

type (
	CreateUserQuery interface {
		isCreateUserQuery_Kind()
		From(context.Context, *CreateUserRequest) (CreateUserQuery, context.Context, error)
	}
	CreateUserResult interface {
		isCreateUserResult_Kind()
		To(context.Context) (*CreateUserResponse, error)
	}
	UnimplementedCreateUserQuery  struct{}
	UnimplementedCreateUserResult struct{}

	GetUserQuery interface {
		isGetUserQuery_Kind()
		From(context.Context, *GetUserRequest) (GetUserQuery, context.Context, error)
	}
	GetUserResult interface {
		isGetUserResult_Kind()
		To(context.Context) (*GetUserResponse, error)
	}
	UnimplementedGetUserQuery  struct{}
	UnimplementedGetUserResult struct{}

	GetUsersQuery interface {
		isGetUsersQuery_Kind()
		From(context.Context, *GetUsersRequest) (GetUsersQuery, context.Context, error)
	}
	GetUsersResult interface {
		isGetUsersResult_Kind()
		To(context.Context) (*GetUsersResponse, error)
	}
	UnimplementedGetUsersQuery  struct{}
	UnimplementedGetUsersResult struct{}
)

func (UnimplementedDeleteUserCommand) isDeleteUserCommand_Kind() {}
func (UnimplementedDeleteUserCommand) From(context.Context, *DeleteUsersRequest) (DeleteUserCommand, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedUpdateUserCommand) isUpdateUserCommand_Kind() {}
func (UnimplementedUpdateUserCommand) From(context.Context, *UpdateUserRequest) (UpdateUserCommand, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedCreateUserQuery) isCreateUserQuery_Kind() {}
func (UnimplementedCreateUserQuery) From(context.Context, *CreateUserRequest) (CreateUserQuery, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedCreateUserResult) isCreateUserResult_Kind() {}
func (UnimplementedCreateUserResult) To(context.Context) (*CreateUserResponse, error) {
	panic("implement me")
	return nil, nil
}

func (UnimplementedGetUserQuery) isGetUserQuery_Kind() {}
func (UnimplementedGetUserQuery) From(context.Context, *GetUserRequest) (GetUserQuery, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedGetUserResult) isGetUserResult_Kind() {}
func (UnimplementedGetUserResult) To(context.Context) (*GetUserResponse, error) {
	panic("implement me")
	return nil, nil
}

func (UnimplementedGetUsersQuery) isGetUsersQuery_Kind() {}
func (UnimplementedGetUsersQuery) From(context.Context, *GetUsersRequest) (GetUsersQuery, context.Context, error) {
	panic("implement me")
	return nil, nil, nil
}
func (UnimplementedGetUsersResult) isGetUsersResult_Kind() {}
func (UnimplementedGetUsersResult) To(context.Context) (*GetUsersResponse, error) {
	panic("implement me")
	return nil, nil
}

// f.File.Desc.Path(): user/v1/demo.proto
// protoFilePath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user/v1/demo.proto<nil>
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user/v1/demo.proto
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user/v1/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user/v1
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/user
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/api/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example/api
// cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/cq
// -- cqDirPath: /Users/stuff/Workspace/github/go-leo/leo/example/cq
// loopPath: /Users/stuff/Workspace/github/go-leo/leo/example
// goMode.Module.Mod.Path: github.com/go-leo/leo/v3
// loopPath: /Users/stuff/Workspace/github/go-leo/leo
// loopPath: /Users/stuff/Workspace/github/go-leo
// loopPath: /Users/stuff/Workspace/github
// loopPath: /Users/stuff/Workspace
// loopPath: /Users/stuff
// loopPath: /Users
// loopPath: /
// rel: ../../../cq
// cmdFilename: ../../../cq/create_user_leo.command.pb.go
